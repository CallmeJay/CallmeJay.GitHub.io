---
title: 面试知识点总结（1）
date: 2018-07-20 14:22:45
categories: 面试
tags: 面试
---

### 防抖

你是否在日常开发中遇到一个问题，在滚动事件中需要做个复杂计算或者实现一个按钮的防二次点击操作。

这些需求都可以通过函数防抖动来实现。尤其是第一个需求，如果在频繁的事件回调中做复杂计算，很有可能导致页面卡顿，不如将多次计算合并为一次计算，只在一个精确点做操作。因为防抖动的轮子很多，这里也不重新自己造个轮子了，直接使用 underscore 的源码来解释防抖动。

<!--more-->

```js
/**
 * underscore 防抖函数，返回函数连续调用时，空闲时间必须大于或等于 wait，func 才会执行
 *
 * @param  {function} func        回调函数
 * @param  {number}   wait        表示时间窗口的间隔
 * @param  {boolean}  immediate   设置为ture时，是否立即调用函数
 * @return {function}             返回客户调用函数
 */

function debounce(func,wait,immediate){
  let timeout, args, context, timestamp, result;

  let later = function(){
    // 获取时间差
    let last = Date.now() - timestamp;
    // 如果时间还没有到
    if( last < wait &&  last > 0){
      timeout = setTimeout(later,wait - last);
    }else {
      timeout = null;
      result = func.apply(context,args);
      if(!timeout) context = args = null;
    }
  }

  return function(){
    context = this;
    args = arguments;
    timestamp = Date.now();
    let callnow = immediate && !timeout;
    if(!timeout) timeout = setTimeout(later,wait);
    if(callnow){
      result = func.apply(context,args);
      context = args = null;
    }

    return result;
  }
}
```

[debounced解析](https://github.com/mqyqingfeng/Blog/issues/22)